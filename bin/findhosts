#!/bin/bash


spaces() {
    if [ "$1" -lt "100" ]; then
        printf " "
    fi

    if [ "$1" -lt "10" ]; then
        printf " "
    fi
}

prefix=`ifconfig en0 | grep 'inet ' | grep -v 127.0.0.1 | sed -e 's/^ *//g' -e 's/ *$//g' | cut -d\  -f2 | cut -d. -f1-3`

echo -e "\033[4mIP Address    | Hostname         \033[0m"

for ip in $(seq 1 254); do
    name=`nslookup $prefix.$ip $prefix.1 | grep "name"`
    printf "\r"
    
    if [ -n "$name" ]; then
        echo $prefix.$ip "`spaces $ip`│" `echo $name | cut -d" " -f4 | sed 's/.$//'` && last=1
    else
        printf "$prefix.$ip `spaces $ip`│ ..." && last=0
    fi

done

[ $last==0 ] && printf "\r" || printf "\n";

